"use strict";$(function(){$(".js-show").on("click",function(e){e.preventDefault(),$(".js-hidden-content").slideDown()}),$(".js-slide").owlCarousel({loop:!0,margin:20,nav:!0,items:2,dots:!1,slideBy:2,navText:['<i class="flabio-angle-left"></i>','<i class="flabio-angle-right"></i>']}),$(".js-about-slide").owlCarousel({loop:!0,margin:10,nav:!1,items:1,dots:!0}),$(".js-step-slider").owlCarousel({loop:!0,margin:10,nav:!0,items:1,navText:['<i class="flabio-angle-left"></i>','<i class="flabio-angle-right"></i>'],dotsContainer:".steps__thumbnail",dots:!1,thumbs:!0,thumbsPrerendered:!0}),$(document).ready(function(){function e(e){var t=e.item.count-1,a=Math.round(e.item.index-e.item.count/2-.5);a<0&&(a=t),a>t&&(a=0),o.find(".owl-item").removeClass("current").eq(a).addClass("current");var n=o.find(".owl-item.active").length-1,i=o.find(".owl-item.active").first().index();a>o.find(".owl-item.active").last().index()&&o.data("owl.carousel").to(a,100,!0),a<i&&o.data("owl.carousel").to(a-n,100,!0)}function t(e){if(n){var t=e.item.index;a.data("owl.carousel").to(t,100,!0)}}var a=$("#sync1"),o=$("#sync2"),n=!0;a.owlCarousel({items:1,slideSpeed:2e3,nav:!0,autoplay:!1,dots:!1,loop:!0,responsiveRefreshRate:200,navText:['<i class="flabio-angle-left"></i>','<i class="flabio-angle-right"></i>']}).on("changed.owl.carousel",e),o.on("initialized.owl.carousel",function(){o.find(".owl-item").eq(0).addClass("current")}).owlCarousel({items:6,dots:!0,nav:!1,smartSpeed:200,slideSpeed:500,mouseDrag:!1,slideBy:4,responsiveRefreshRate:100}).on("changed.owl.carousel",t),o.on("click",".owl-item",function(e){e.preventDefault();var t=$(this).index();a.data("owl.carousel").to(t,300,!0)})}),$("form").submit(function(){var e=$(this);return $.ajax({type:"POST",url:"../mail.php",data:e.serialize()}).done(function(){alert("Thank you!"),setTimeout(function(){e.trigger("reset")},1e3)}),!1}),$(".popup-content").magnificPopup({type:"inline"}),$("#js-nav a").on("click",function(e){e.preventDefault();var t=$(this).attr("href"),a=$(t).offset().top;$("html, body").animate({scrollTop:a-0},500)}),new WOW({boxClass:"wow",animateClass:"animated",offset:0,mobile:!0,live:!0,callback:function(e){},scrollContainer:null}).init(),$(".js-phone").mask("+7 (999) 999-99-99"),$(".header__nav ul").clone().appendTo(".mmenu-nav");var e=$(".mmenu-nav").mmenu({navbar:{title:"Меню"},extensions:["fx-menu-slide","fx-listitems-slide","border-full","pagedim-black"],offCanvas:{position:"right"},counters:!0}),t=$(".js-navtrigger"),a=e.data("mmenu");if(t.on("click",function(){a.open()}),a.bind("open:start",function(e){$(".js-navtrigger").toggleClass("-active")}),a.bind("close:start",function(e){$(".js-navtrigger").toggleClass("-active")}),Modernizr.mq("(max-width: 767px)")){var o=function(e){if($("#map").html(""),n=new ymaps.Map("map",{controls:["zoomControl","fullscreenControl","geolocationControl"],center:[59.925655,30.312032],behaviors:["drag"],zoom:17}),!e.type)return i=new ymaps.Placemark([59.925655,30.312032],{balloonContentHeader:"",balloonContentBody:""}),n.geoObjects.add(i),!0};$('a.-pagescroll[href*="#"]:not([href="#"])').click(function(){if(a.close(),location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var e=$(this.hash);if(e=e.length?e:$("[name="+this.hash.slice(1)+"]"),e.length)return $("html, body").animate({scrollTop:e.offset().top},1e3),!0}});var n,i;ymaps.ready(o)}else{var l=function(e){if($("#map").html(""),n=new ymaps.Map("map",{controls:["zoomControl","fullscreenControl","geolocationControl"],center:[59.925655,30.312032],behaviors:["drag"],zoom:17}),!e.type)return i=new ymaps.Placemark([59.925655,30.312032],{balloonContentHeader:"",balloonContentBody:"г. Санкт-Петербург, м. Садовая, наб. канала Грибоедова, 70"}),n.geoObjects.add(i),!0};$('a.-pagescroll[href*="#"]:not([href="#"])').click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var e=$(this.hash);if(e=e.length?e:$("[name="+this.hash.slice(1)+"]"),e.length)return $("html, body").animate({scrollTop:e.offset().top},1e3),!0}});var n,i;ymaps.ready(l)}});